# Coze学习文档

## 什么是Coze

扣子是新一代 AI 应用开发平台。无论你是否有编程基础，都可以在扣子上快速搭建基于大模型的各类 AI 应用，并将 AI 应用发布到各个社交平台、通讯软件，也可以通过 API 或 SDK 将 AI 应用集成到你的业务系统中。

### 扣子能做什么

借助扣子提供的可视化设计与编排工具，你可以通过零代码或低代码的方式，快速搭建出基于大模型的各类 AI 项目，满足个性化需求、实现商业价值。

- **智能体**：**智能体是基于对话的 AI 项目，它通过对话方式接收用户的输入，由大模型自动调用插件或工作流等方式执行用户指定的业务流程，并生成最终的回复。智能客服、虚拟伴侣、个人助理、英语外教都是智能体的典型应用场景。**
- **应用**：**应用是指利用大模型技术开发的应用程序。扣子中搭建的 AI 应用具备完整业务逻辑和可视化用户界面，是一个独立的 AI 项目。通过扣子开发的 AI 应用有明确的输入和输出，可以根据既定的业务逻辑和流程完成一系列简单或复杂的任务，例如 AI 搜索、翻译工具、饮食记录等。**



### 为什么选择扣子

- **灵活的工作流设计**

扣子的工作流功能可以用来处理逻辑复杂，且有较高稳定性要求的任务流。扣子提供了大量灵活可组合的节点包括大语言模型 LLM、自定义代码、判断逻辑等，无论你是否有编程基础，都可以通过拖拉拽的方式快速搭建一个工作流。例如创建一个撰写行业研究报告的工作流，让智能体写一份 20 页的报告。

- **无限拓展的能力集**

扣子集成了丰富的插件工具，极大地拓展智能体的能力边界。扣子官方发布了多款能力丰富的插件，你可以直接将这些插件添加到智能体中。例如使用新闻插件，打造一个可以播报最新时事新闻的 AI 新闻播音员。扣子平台也支持创建自定义插件。 你可以将已有的 API 能力通过参数配置的方式快速创建一个插件让智能体调用。自定义插件也可以发布到商店，供其他用户使用。 

- **丰富的数据源**

扣子提供了简单易用的知识库功能来管理和存储数据，支持智能体与你自己的数据进行交互。无论是内容量巨大的本地文件还是某个网站的实时信息，都可以上传到知识库中。这样，智能体就可以使用知识库中的内容回答问题了。

- **持久化的记忆能力**

扣子提供了方便 AI 交互的数据库记忆能力，可持久记住用户对话的重要参数或内容。创建一个数据库来记录阅读笔记，包括书名、阅读进度和个人注释。有了数据库，智能体就可以通过查询数据库中的数据来提供更准确的答案。



## 平台架构

扣子为 AI 应用（包括智能体）开发人员提供了一站式全链路的 AI 应用搭建能力，包括应用开发、测评、监控和丰富的发布渠道。

- **空间**：空间是资源组织的基础单元，不同空间内的资源和数据相互隔离。一个空间内可创建多个智能体和 AI 应用，并包含一个资源库。在资源库中创建的资源可以被相同空间内的智能体和 AI 应用使用。

- **项目**：项目分为智能体和 AI 应用两种类型，AI 应用内可以创建多种应用专属资源，也可以和智能体共享空间资源库中的资源。

- **智能体**：智能体（Agent）通常指的是一个能够独立执行任务、做出决策并进行学习的一种自动化程序。智能体可以根据用户输入的指令，自主调用模型、知识库、插件等技能并完成编排，最终完成用户的指令。

- **AI 应用**：AI 应用是指利用大模型技术开发的应用程序，这些应用程序能够使用大模型，执行复杂任务，分析数据，并作出决策。

- **资源库**：你可以在资源库内创建、发布、管理共享资源例如插件、知识库、数据库、提示词等。这些资源可以被同一空间内的智能体和应用使用。

  - **资源可以存在于两个实体内，一个是空间的资源库，一个是 AI 应用项目中的项目资源库。**

  - - **空间资源库**：在空间资源库内创建的资源可以被空间内的 AI 应用项目和智能体项目使用，属于空间内的共享资源。
    - **AI 应用项目**：在 AI 应用项目中也可以创建资源，但这些资源是项目自有的资源，默认不可以被其他项目使用也不会展示在空间资源库内。

  当需要将 AI 应用项目中的资源转换成公共资源给其他 AI 应用或智能体使用时，可以将这些资源转移或复制到空间资源库内。

![image-20250228184719044](https://lyx-study-note-image.oss-cn-shenzhen.aliyuncs.com/img/image-20250228184719044.png)



## 搭建一个 AI 助手智能体



### 搭建步骤

### 步骤1：创建一个智能体

1. 登录[扣子平台](https://www.coze.cn/)。
2. 在页面左上角单击⊕。
3. 输入智能体名称和功能介绍，然后单击**图标**旁边的**生成**图标，自动生成一个头像。

你也可以切换到 **AI 创建**，通过自然语言描述你的智能体创建需求，扣子根据你的描述自动创建一个专属于你的智能体。详细请参考[通过AI创建智能体](https://www.coze.cn/open/docs/guides/assistant_coze#d11d798b)。

1. 单击**确认**。

创建智能体后，你会直接进入智能体编排页面。你可以：

- - 在左侧**人设与回复逻辑**面板中描述智能体的身份和任务。
  - 在中间**技能**面板为智能体配置各种扩展能力。
  - 在右侧**预览与调试**面板中，实时调试智能体。



### 步骤2：编写提示词

配置智能体的第一步就是编写**提示词**，也就是智能体的 **人设与回复逻辑**。智能体的**人设与回复逻辑**定义了智能体的基本人设，此人设会持续影响智能体在所有会话中的回复效果。建议在人设与回复逻辑中指定模型的角色、设计回复的语言风格、限制模型的回答范围，让对话更符合用户预期。

在智能体配置页面的**人设与回复逻辑**面板输入提示词。例如

夸夸机器人的提示测可以设置为：

```Mar
# 角色
你是一个充满正能量的赞美鼓励机器人，时刻用温暖的话语给予人们赞美和鼓励，让他们充满自信与动力。

## 技能
### 技能 1：赞美个人优点
1. 当用户提到自己的某个特点或行为时，挖掘其中的优点进行赞美。回复示例：你真的很[优点]，比如[具体事例说明优点]。
2. 如果用户没有明确提到自己的特点，可以主动询问一些问题，了解用户后进行赞美。回复示例：我想先了解一下你，你觉得自己最近做过最棒的事情是什么呢？

### 技能 2：鼓励面对困难
1. 当用户提到遇到困难时，给予鼓励和积极的建议。回复示例：这确实是个挑战，但我相信你有足够的能力去克服它。你可以[具体建议]。
2. 如果用户没有提到困难但情绪低落，可以询问是否有不开心的事情，然后给予鼓励。回复示例：你看起来有点不开心，是不是遇到什么事情了呢？不管怎样，你都很坚强，一定可以度过难关。

### 技能 3：回答专业问题
遇到你无法回答的问题时，调用bingWebSearch搜索答案

## 限制
- 只输出赞美和鼓励的话语，拒绝负面评价。
- 所输出的内容必须按照给定的格式进行组织，不能偏离框架要求。

```

#### 提示词概述

提示词是一种自然语言指令，他为大语言模型(LLM)提供任务指导。搭建智能体的第一步就是编写提示词，为智能体设定身份和目标。智能体会根据大语言模型对人物设定和回复逻辑的理解，来响应用户问题。因此提示词编写得越清晰明确，智能体的回复也会越符合预期。

##### 功能特性

- **AI生成**：你可以通过自然语言告诉AI你希望编写或优化的提示词，大语言模型会根据你的描述自动生成提示词；你也可以根据调试结果告诉AI提示词哪里不符合预期以及你的预期效果，大语言模型会自动帮你完成优化
- **高效编写**：支持Jinja和MarkDown语法，以及编辑块和快速引用技能等功能，帮助你更搞笑地编写提示词，从而提高大模型的输出质量。
- **模版复用**：扣子提供了各种业务场景的提示词模板，你可以直接使用这些模板，也可以将其修改为更适合自己业务的提示词。
- **资源管理：**你可以在资源库中创建提示词，供团队内的其他成员引用。通过更新和丰富提示词资源库，可以不断提高提示词的编写效率。

 

#### 提示词类型

提示词包括系统提示词和用户提示词，两者区别如下：

- **系统提示词**：在搭建智能体时，设置的**人设与回复逻辑**就是系统提示词，他是开发者为大语言模型设定的初始参数和行为准则，在整个会话中持续影响大模型的响应模式。通过编写系统提示词，可以为大模型设定特定的角色定位和回复逻辑。
- **用户提示词：**在与智能体对话时，用户的输入就是用户提示词，他是用户直接向大语言模型踢出的具体指令或问题，指导模型执行特定的任务或提供特定的信息。用户提示词的设置应简洁明了，以便模型能够准确捕捉用户的需求。

假设我们需要构建一个友好且专业的健康咨询助手，以下是设置系统提示词和用户提示词的示例：

- 系统提示词：你是一个友好且专业的健康咨询助手，专注于为用户提供基于科学和医学知识的健康建议。在回答用户的问题时，你的回答应该既专业又易于理解，同时保持语言的温和和鼓励性。请确保所有建议都是基于最新的健康指南，并避免提供具体的医疗诊断。
- 用户提示词：我最近总是感到疲劳，这可能是什么原因呢？。



#### 设置提示词

提示词是一种自然语言指令，它为**大语言模型**（LLM）提供任务指导。搭建智能体或配置工作流的大模型节点都需要设置提示词，你可以根据业务需要直接编写提示词，也可以使用提示词模版、引用提示词资源或通过 AI 自动生成提示词。

智能体是基于大语言模型的 AI 应用，搭建智能体的第一步就是设置提示词。

#### 编写提示词

在搭建智能体或配置工作流中的大模型节点时，首要步骤就是编写提示词，明确设定智能体和大模型节点的身份和目标。大语言模型会根据对提示词的理解，来响应用户问题。

##### 编写建议

清晰明确的提示词可以有效提高大模型的输出质量，降低错误率，并满足特定场景的需求。建议你再编写提示词前，先了解提示词的编写技巧。

- **明确目标和任务：**在编写提示词之前，首先要明确智能体或大模型节点的目标和任务，这涉及到对智能体预期行为的深入理解。
- **简洁而具体：**提示词应该简洁而具体，直接指向智能体或大模型节点需要执行的任务。
- **使用上下文：**在提示词中包含相关的上下文信息，可以帮助智能体或大模型节点更好地理解任务的背景和需求。
- **避免歧义：**确保提示词中的语言清晰无歧义，模糊的指令可能导致智能体或大模型节点产生错误的理解，从而影响其性能。
- **反馈和迭代：**编写提示词是一个迭代的过程，根据智能体或大模型节点的反馈不断调整和优化提示词，以提高其效果。
- **利用示例：**提供示例输入和预期输出，可以帮助智能体或大模型节点学习如何正确响应。
- **考虑多样性：**在编写提示词时，需要考虑不同用户的表达方式，智能体或大模型节点应该能够处理多种不同的输入方式。
- **测试和验证：**在发布智能体或工作流之前，进行充分的测试和验证，以确保提示词在各种情况下都能正常工作，包括测试对异常输入的处理能力。
- **遵守伦理和法律标准：**在编写提示词时，确保智能体或大模型节点的行为符合伦理和法律标准，包括保护用户隐私、避免歧视性语言和行为。

以下是一个提示词示例，包含**人物设定**、**功能和流程**、**约束与限制**和**回复格式**。

| **内容模块** | **说明**                                                     | **示例**                                                     |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 人物设定     | 描述所扮演的角色、职责和回复风格。                           | `## 人设 你是一个新闻播报员，可以用非常生动的风格讲解科技新闻。 ` |
| 功能和流程   | 描述智能体的功能和工作流程，约定智能体在不同的场景下如何回答用户问题。  尽管智能体会根据提示内容自动选择工具。但仍建议通过自然语言强调在何种场景下、调用哪个工具来提升对智能体的约束力，选择更符合预期的工具以保证回复的准确性。  如果智能体设置了变量并开启了**提示词访问**，你也可以在人设与提示词中，指定变量的具体使用场景，例如称呼你的用户为{{name}}。 | `## 技能 当用户询问最新的科技新闻时，先调用“getToutiaoNews” 搜索最新科技新闻，再调用“LinkReaderPlugin”访问新闻地址，最终整理最重要的 3 条新闻回复用户。 ` |
| 约束与限制   | 如果你想限制回复范围，请直接告诉智能体什么应该回答、什么不应该回答。 | `## 限制 拒绝回答与新闻无关的话题；如果并没有搜索到新闻结果，请告诉用户你没有查到新闻，而不应该编造内容。 ` |
| 回复格式     | 你也可以为智能体提供回复格式的示例。智能体会模仿提供的回复格式回复用户。 | ` 请参考如下格式回复：  **新闻标题**  - 新闻摘要：30 个字左右的新闻摘要  - 新闻时间：yyyy-mm-dd ` |



#### 使用 Markdown 编写提示词

Markdown 是一种轻量级的标记语言，对于功能相对复杂的场景，推荐使用结构化格式来编写提示词，结构化提示使用 Markdown 语法，可读性更强、更便于迭代。 

下面是一个使用 Markdown 语法编写的提示词示例。 

```
# 角色
你是一位资深且专业的数据分析专家，能够熟练运用 analyze 工具进行全面的数据处理与分析，以清晰易懂的方式向用户阐释数据特性及复杂的分析结果，无论是简单的数据还是复杂的数据集，都能高效应对。

## 技能
### 技能 1: 提取数据
1. 当用户提供一个数据源时，首先尝试使用 analyze 工具的 extract 数据功能进行提取。
2. 若数据源无法直接提取，判断是否需要使用特定编程语言写脚本提取数据。若需要，详细解释所使用的逻辑和方法，不能仅仅给出代码。
===回复示例===
数据源情况：<描述数据源的特点及问题>。提取方法：<说明使用的工具或编程语言以及具体的提取逻辑>。
===示例结束===

### 技能 2: 处理数据
1. 使用 analyze 工具的 data cleaning 功能进行数据清洗，包括妥善处理缺失值、异常值和重复值等。
2. 通过数据转换、数据规范化等方式对数据进行预处理，确保数据适合进一步的分析，并说明处理的理由和方法。
===回复示例===
数据问题：<列举数据中存在的问题>。处理方法：<说明具体的数据处理步骤和使用的工具或技术>。
===示例结束===

### 技能 3: 分析数据
1. 根据用户需求，使用 analyze 工具进行描述性统计分析、关联性分析或预测性分析等。
2. 通过数据可视化方法，如柱状图、散点图、箱线图等，辅助展示分析结果，并详细解释分析结果的含义，不能仅仅给出数字或图表。
===回复示例===
分析需求：<描述用户的分析需求>。分析结果：<展示分析结果的图表或数字，并详细解释其含义>。
===示例结束===

## 限制:
- 只讨论与数据分析有关的内容，拒绝回答与数据分析无关的话题。
- 所输出的内容必须按照给定的格式进行组织，不能偏离框架要求。
- 对于分析结果，需要详细解释其含义，不能仅仅给出数字或图表。
- 在使用特定编程语言提取数据时，必须解释所使用的逻辑和方法，不能仅仅给出代码。

```































































































































































